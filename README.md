# TWIN_parse
Тестовый парсер файлов разговоров с формированием дерева разговоров (см. задание: data\README.md). Главный файл (main.py) запускает сервис обработки, который в цикле просматривает каталог входных файлов разговоров (data/input). При наличии файлов они обрабатываются в соответствии с заданием (data/README.md), результаты обработки добавляются в дерево разговоров (data/output/result.json). Успешно обработанные файлы перемещаются в каталог data/processed, файлы с ошибками при обработке перемещаются в каталог data/errors.

# Состав файлов
	config.json						- конфмгурация сервисов и интерфейсов
	main.py							- запуск
	README.md						- этот файл
	utils.py						- вспомогательные функции
	data\							- данные для обработки и результаты
		README.md						- задание
		input\
			*.json						- файлы разговоров для обработки
		output\
			result.json					- резкльтат (дерево разговоров)
		processed\
			*.json						- обработанные файлы без ошибок
		errors\
			*.json						- файлы с ошибками при обработке
			*.err						- описание ошибок
	interfaces\
		baseInterface.py					- базовый класс для интерфейсов
		files\
			fileInterface.py				- интефейс доступа к файлам
			jsonInterface.py				- интефейс доступа к JSON файлам
		https\
			httpInterface.py				- интефейс доступа по протоколу HTTP|HTTPS
	services\
		baseService.py					- Базовый класс для сервисов 
		twinService.py					- сервис обработки разговогов

# Конфигурация (файл config.json)
	{
	"wait_timeout": 3,				- задержка между обработкой входных файлов
	"files": {						- параметры файлового интерфейса
		"base_path": "data",			- базовый путь
		"ident": 2					- отступ в формируемых json файла
	},
	"parser": {					- параметры HTTP интерфейса
		"base_url": "https://sandbox.twin24.ai/parse",	- базовый URL
		"encoding": "json"			- способ декодирования результата
	},
	"errors": {					- параметры файлового интерфейса описания ошибок
		"base_path": "data/errors"		- базовый путь
	},
	"log_level": "DEBUG"				- тип логирования (DEBUG, ERROR, NOTSET)
	}